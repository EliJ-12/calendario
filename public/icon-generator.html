<!DOCTYPE html>
<html>
<head>
  <title>Redimensionar Imagen</title>
  <style>
    #preview { max-width: 100%; }
  </style>
</head>
<body>
  <input type="file" id="imageInput" accept="image/*" />
  <canvas id="canvas" width="198" height="198"></canvas>
  <img id="preview" src="" alt="Vista previa" />

  <script>
    document.getElementById('imageInput').addEventListener('change', function(e) {
      const file = e.target.files[0];
      if (!file) return;
      
      const reader = new FileReader();
      reader.onload = function(event) {
        const img = new Image();
        img.onload = function() {
          const canvas = document.getElementById('canvas');
          const ctx = canvas.getContext('2d');
          
          // Limpiar canvas
          ctx.clearRect(0, 0, 198, 198);
          
          // Redimensionar manteniendo la relaci√≥n de aspecto
          const ratio = Math.min(198 / img.width, 198 / img.height);
          const width = img.width * ratio;
          const height = img.height * ratio;
          const x = (198 - width) / 2;
          const y = (198 - height) / 2;
          
          ctx.drawImage(img, x, y, width, height);
          
          // Mostrar vista previa
          document.getElementById('preview').src = canvas.toDataURL('image/png');
          
          // Para descargar la imagen
          const link = document.createElement('a');
          link.download = 'imagen-198x198.png';
          link.href = canvas.toDataURL('image/png');
          link.click();
        };
        img.src = event.target.result;
      };
      reader.readAsDataURL(file);
    });
  </script>
</body>
</html>